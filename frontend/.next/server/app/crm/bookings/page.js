(()=>{var e={};e.id=7218,e.ids=[7218],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},26871:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d}),r(6552),r(11506),r(35866);var l=r(23191),s=r(88716),a=r(37922),i=r.n(a),o=r(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(t,n);let d=["",{children:["crm",{children:["bookings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6552)),"/app/frontend/app/crm/bookings/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"/app/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/crm/bookings/page.tsx"],u="/crm/bookings/page",p={require:r,loadChunk:()=>Promise.resolve()},g=new l.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/crm/bookings/page",pathname:"/crm/bookings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},95184:(e,t,r)=>{Promise.resolve().then(r.bind(r,8730)),Promise.resolve().then(r.bind(r,9494))},8730:(e,t,r)=>{"use strict";r.d(t,{default:()=>N});var l=r(10326),s=r(17577),a=r(88307),i=r(44856),o=r(5932),n=r(24061),d=r(62881);let c=(0,d.Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),u=(0,d.Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),p=(0,d.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var g=r(35047),x=r(94019);let m=(0,d.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);function b({data:e,onChange:t}){let r=(r,l)=>{t({...e,[r]:l})};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:"\uD83C\uDF7D️ Food & Catering Options"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Food Package"}),(0,l.jsxs)("select",{value:e.foodPackage||"standard",onChange:e=>r("foodPackage",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",children:[l.jsx("option",{value:"basic",children:"Basic Package (\xa315/head)"}),l.jsx("option",{value:"standard",children:"Standard Package (\xa325/head)"}),l.jsx("option",{value:"premium",children:"Premium Package (\xa340/head)"}),l.jsx("option",{value:"custom",children:"Custom Package"})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Dietary Requirements (select all that apply)"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Vegetarian","Vegan","Halal","Gluten-Free","Nut Allergy","Dairy-Free"].map(t=>(0,l.jsxs)("label",{className:"flex items-center gap-2 p-2 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.dietaryRequirements?.includes(t)||!1,onChange:l=>{let s=e.dietaryRequirements||[];l.target.checked?r("dietaryRequirements",[...s,t]):r("dietaryRequirements",s.filter(e=>e!==t))},className:"rounded border-purple-500/30"}),l.jsx("span",{className:"text-sm text-gray-300",children:t})]},t))})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Catering Notes"}),l.jsx("textarea",{value:e.cateringNotes||"",onChange:e=>r("cateringNotes",e.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"Any special menu requests or notes..."})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Catering Fee (\xa3)"}),l.jsx("input",{type:"number",value:e.cateringFee||0,onChange:e=>r("cateringFee",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-pink-400 mb-4",children:"\uD83C\uDFA8 Decor & Styling Options"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Decor Package"}),(0,l.jsxs)("select",{value:e.decorPackage||"basic",onChange:e=>r("decorPackage",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-pink-500/30 rounded-lg text-white focus:border-pink-400 focus:ring-2 focus:ring-pink-400/50 transition-all",children:[l.jsx("option",{value:"basic",children:"Basic Decor (\xa3200)"}),l.jsx("option",{value:"premium",children:"Premium Decor (\xa3500)"}),l.jsx("option",{value:"luxury",children:"Luxury Decor (\xa31000)"}),l.jsx("option",{value:"custom",children:"Custom Package"})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Decor Theme"}),l.jsx("input",{type:"text",value:e.decorTheme||"",onChange:e=>r("decorTheme",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-pink-500/30 rounded-lg text-white focus:border-pink-400 focus:ring-2 focus:ring-pink-400/50 transition-all",placeholder:"e.g., Modern, Traditional, Rustic, Elegant..."})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Decor Items (select all needed)"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Stage Decoration","Backdrop","Table Centerpieces","Chair Covers","Floral Arrangements","Lighting","Balloons","Draping"].map(t=>(0,l.jsxs)("label",{className:"flex items-center gap-2 p-2 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.decorItems?.includes(t)||!1,onChange:l=>{let s=e.decorItems||[];l.target.checked?r("decorItems",[...s,t]):r("decorItems",s.filter(e=>e!==t))},className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300",children:t})]},t))})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Decor Fee (\xa3)"}),l.jsx("input",{type:"number",value:e.decorFee||0,onChange:e=>r("decorFee",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-pink-500/30 rounded-lg text-white focus:border-pink-400 focus:ring-2 focus:ring-pink-400/50 transition-all"})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:"\uD83C\uDFDB️ Venue Setup & Equipment"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Room Setup Style"}),(0,l.jsxs)("select",{value:e.roomSetup||"banquet",onChange:e=>r("roomSetup",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-blue-500/30 rounded-lg text-white focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-all",children:[l.jsx("option",{value:"theater",children:"Theater Style"}),l.jsx("option",{value:"banquet",children:"Banquet Style"}),l.jsx("option",{value:"cocktail",children:"Cocktail Reception"}),l.jsx("option",{value:"classroom",children:"Classroom Style"}),l.jsx("option",{value:"reception",children:"Standing Reception"})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Audio Visual Equipment (select all needed)"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Projector & Screen","Microphones","Sound System","Stage Lighting","Wireless Mics","Laptop/HDMI"].map(t=>(0,l.jsxs)("label",{className:"flex items-center gap-2 p-2 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.audioVisual?.includes(t)||!1,onChange:l=>{let s=e.audioVisual||[];l.target.checked?r("audioVisual",[...s,t]):r("audioVisual",s.filter(e=>e!==t))},className:"rounded border-blue-500/30"}),l.jsx("span",{className:"text-sm text-gray-300",children:t})]},t))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Venue Hire Fee (\xa3)"}),l.jsx("input",{type:"number",value:e.venueHireFee||0,onChange:e=>r("venueHireFee",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-blue-500/30 rounded-lg text-white focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Equipment Fee (\xa3)"}),l.jsx("input",{type:"number",value:e.equipmentFee||0,onChange:e=>r("equipmentFee",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-blue-500/30 rounded-lg text-white focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-all"})]})]})]})]})]})}function h({data:e,onChange:t}){let r=(r,l)=>{t({...e,[r]:l})};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:"\uD83C\uDF74 Service Type & Cuisine"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Cuisine Type"}),l.jsx("input",{type:"text",value:e.cuisineType||"",onChange:e=>r("cuisineType",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"e.g., Pakistani, Indian, BBQ, Continental"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Service Type"}),(0,l.jsxs)("select",{value:e.serviceType||"buffet",onChange:e=>r("serviceType",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",children:[l.jsx("option",{value:"buffet",children:"Buffet Service"}),l.jsx("option",{value:"plated",children:"Plated Service"}),l.jsx("option",{value:"family-style",children:"Family-Style"}),l.jsx("option",{value:"cocktail",children:"Cocktail Style"})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Courses Included"}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:["Starter","Main Course","Dessert","Beverages"].map(t=>(0,l.jsxs)("label",{className:"flex items-center gap-2 p-2 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.courses?.includes(t)||!1,onChange:l=>{let s=e.courses||[];l.target.checked?r("courses",[...s,t]):r("courses",s.filter(e=>e!==t))},className:"rounded border-purple-500/30"}),l.jsx("span",{className:"text-sm text-gray-300",children:t})]},t))})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-pink-400 mb-4",children:"⚙️ Service Options & Staff"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.chefOnSite||!1,onChange:e=>r("chefOnSite",e.target.checked),className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Chef On-Site"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.setupService||!1,onChange:e=>r("setupService",e.target.checked),className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Setup Service"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.cleanupService||!1,onChange:e=>r("cleanupService",e.target.checked),className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Cleanup Service"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.beverageService||!1,onChange:e=>r("beverageService",e.target.checked),className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Beverage Service"})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Number of Wait Staff"}),l.jsx("input",{type:"number",value:e.waitStaff||0,onChange:e=>r("waitStaff",parseInt(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-pink-500/30 rounded-lg text-white focus:border-pink-400 focus:ring-2 focus:ring-pink-400/50 transition-all",placeholder:"e.g., 4"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Serving Equipment Needed"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Chafing Dishes","Plates & Cutlery","Serving Utensils","Tables","Tablecloths","Napkins"].map(t=>(0,l.jsxs)("label",{className:"flex items-center gap-2 p-2 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.servingEquipment?.includes(t)||!1,onChange:l=>{let s=e.servingEquipment||[];l.target.checked?r("servingEquipment",[...s,t]):r("servingEquipment",s.filter(e=>e!==t))},className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300",children:t})]},t))})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:"\uD83D\uDE9A Delivery & Timing"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Delivery Location"}),l.jsx("input",{type:"text",value:e.deliveryLocation||"",onChange:e=>r("deliveryLocation",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-blue-500/30 rounded-lg text-white focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-all",placeholder:"Full address..."})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Delivery Time"}),l.jsx("input",{type:"time",value:e.deliveryTime||"",onChange:e=>r("deliveryTime",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-blue-500/30 rounded-lg text-white focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Setup Time"}),l.jsx("input",{type:"time",value:e.setupTime||"",onChange:e=>r("setupTime",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-blue-500/30 rounded-lg text-white focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-all"})]})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-emerald-400 mb-4",children:"\uD83D\uDCB0 Pricing Breakdown"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Per Head Price (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:e.perHeadPrice||0,onChange:e=>r("perHeadPrice",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Service Charge (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:e.serviceCharge||0,onChange:e=>r("serviceCharge",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Equipment Charge (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:e.equipmentCharge||0,onChange:e=>r("equipmentCharge",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Delivery Charge (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:e.deliveryCharge||0,onChange:e=>r("deliveryCharge",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]})]})]})]})]})}function y({data:e,onChange:t}){let r=(r,l)=>{t({...e,[r]:l})};return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-purple-400 mb-4",children:"\uD83C\uDFDB️ Space Type & Purpose"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Space Type"}),l.jsx("input",{type:"text",value:e.spaceType||"",onChange:e=>r("spaceType",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"e.g., Studio, Hall, Room, Gallery"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Purpose"}),l.jsx("input",{type:"text",value:e.purpose||"",onChange:e=>r("purpose",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"e.g., Theatre, Dance, Yoga, Photography"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Duration (hours)"}),l.jsx("input",{type:"number",value:e.duration||2,onChange:e=>r("duration",parseInt(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]}),l.jsx("div",{children:(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors mt-6",children:[l.jsx("input",{type:"checkbox",checked:e.recurringBooking||!1,onChange:e=>r("recurringBooking",e.target.checked),className:"rounded border-purple-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Recurring Booking"})]})}),e.recurringBooking&&(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Frequency"}),(0,l.jsxs)("select",{value:e.frequency||"weekly",onChange:e=>r("frequency",e.target.value),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",children:[l.jsx("option",{value:"daily",children:"Daily"}),l.jsx("option",{value:"weekly",children:"Weekly"}),l.jsx("option",{value:"monthly",children:"Monthly"})]})]})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-pink-400 mb-4",children:"\uD83D\uDCE6 Equipment & Facilities"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Required Equipment (select all needed)"}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:["Mirrors","Yoga Mats","Sound System","Lighting","Camera Equipment","Props","Storage Units","Whiteboard"].map(t=>(0,l.jsxs)("label",{className:"flex items-center gap-2 p-2 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.requiredEquipment?.includes(t)||!1,onChange:l=>{let s=e.requiredEquipment||[];l.target.checked?r("requiredEquipment",[...s,t]):r("requiredEquipment",s.filter(e=>e!==t))},className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300",children:t})]},t))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.audioSystem||!1,onChange:e=>r("audioSystem",e.target.checked),className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Audio System"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.heatingCooling||!1,onChange:e=>r("heatingCooling",e.target.checked),className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Heating/Cooling"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.storageSpace||!1,onChange:e=>r("storageSpace",e.target.checked),className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Storage Space"})]}),(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.keyAccess||!1,onChange:e=>r("keyAccess",e.target.checked),className:"rounded border-pink-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Key Access"})]})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-blue-400 mb-4",children:"⚙️ Setup Requirements"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("label",{className:"flex items-center gap-2 p-3 bg-gray-900 rounded-lg cursor-pointer hover:bg-gray-800 transition-colors",children:[l.jsx("input",{type:"checkbox",checked:e.setupNeeded||!1,onChange:e=>r("setupNeeded",e.target.checked),className:"rounded border-blue-500/30"}),l.jsx("span",{className:"text-sm text-gray-300 font-medium",children:"Setup Service Required"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Specific Requirements"}),l.jsx("textarea",{value:e.specificRequirements||"",onChange:e=>r("specificRequirements",e.target.value),rows:3,className:"w-full px-4 py-3 bg-gray-900 border border-blue-500/30 rounded-lg text-white focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-all",placeholder:"Any special setup or requirements..."})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Security Deposit (\xa3)"}),l.jsx("input",{type:"number",value:e.securityDeposit||0,onChange:e=>r("securityDeposit",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-blue-500/30 rounded-lg text-white focus:border-blue-400 focus:ring-2 focus:ring-blue-400/50 transition-all"})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-lg font-bold text-emerald-400 mb-4",children:"\uD83D\uDCB0 Pricing Breakdown"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Hourly Rate (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:e.hourlyRate||0,onChange:e=>r("hourlyRate",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Additional Hours (\xa3/hr)"}),l.jsx("input",{type:"number",step:"0.01",value:e.additionalHours||0,onChange:e=>r("additionalHours",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Equipment Charge (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:e.equipmentCharge||0,onChange:e=>r("equipmentCharge",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Cleaning Fee (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:e.cleaningFee||0,onChange:e=>r("cleaningFee",parseFloat(e.target.value)),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]})]})]})]})]})}function f({booking:e,isOpen:t,onClose:r,onSave:a}){let[i,o]=(0,s.useState)(e),[n,d]=(0,s.useState)(e.typeSpecificData||{}),[c,u]=(0,s.useState)(!1);if(!t)return null;let p=async()=>{u(!0);try{let t={...i,balanceDue:(i.totalAmount||0)-(i.paidAmount||0),typeSpecificData:n};await a(e._id,t),r()}catch(e){console.error("Error saving booking:",e),alert("Failed to save booking")}finally{u(!1)}};return l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:r,children:(0,l.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl border-2 border-purple-500/50 shadow-2xl max-w-6xl w-full max-h-[90vh] overflow-y-auto my-8",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-purple-600 to-pink-600 p-6 flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Edit Booking"}),(0,l.jsxs)("p",{className:"text-purple-100 mt-1",children:[e.clientName," - ",e.bookingType.toUpperCase()]})]}),l.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:l.jsx(x.Z,{className:"w-6 h-6 text-white"})})]}),(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Basic Information"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Client Name"}),l.jsx("input",{type:"text",value:i.clientName,onChange:e=>o({...i,clientName:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Client Email"}),l.jsx("input",{type:"email",value:i.clientEmail,onChange:e=>o({...i,clientEmail:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Client Phone"}),l.jsx("input",{type:"tel",value:i.clientPhone,onChange:e=>o({...i,clientPhone:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Event Type"}),l.jsx("input",{type:"text",value:i.eventType,onChange:e=>o({...i,eventType:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Date"}),l.jsx("input",{type:"date",value:i.date,onChange:e=>o({...i,date:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Time (Start)"}),l.jsx("input",{type:"time",value:i.startTime,onChange:e=>o({...i,startTime:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Time (End)"}),l.jsx("input",{type:"time",value:i.endTime,onChange:e=>o({...i,endTime:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Guest Count"}),l.jsx("input",{type:"number",value:i.guestCount,onChange:e=>o({...i,guestCount:parseInt(e.target.value)}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Status"}),(0,l.jsxs)("select",{value:i.status,onChange:e=>o({...i,status:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",children:[l.jsx("option",{value:"tentative",children:"Tentative"}),l.jsx("option",{value:"confirmed",children:"Confirmed"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Notes"}),l.jsx("textarea",{value:i.notes||"",onChange:e=>o({...i,notes:e.target.value}),rows:3,className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"Any additional notes..."})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"venue"===i.bookingType?"\uD83C\uDFAA Venue Booking Details":"catering"===i.bookingType?"\uD83C\uDF7D️ Catering Details":"\uD83C\uDFE2 Space Hire Details"}),"venue"===i.bookingType&&l.jsx(b,{data:n,onChange:d}),"catering"===i.bookingType&&l.jsx(h,{data:n,onChange:d}),"hire"===i.bookingType&&l.jsx(y,{data:n,onChange:d})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-emerald-400 mb-4",children:"\uD83D\uDCB0 Pricing Summary"}),l.jsx("div",{className:"bg-gradient-to-br from-emerald-900/30 to-emerald-800/30 p-6 rounded-xl border border-emerald-500/30",children:(0,l.jsxs)("div",{className:"space-y-4 text-white",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Total Amount (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:i.totalAmount||0,onChange:e=>o({...i,totalAmount:parseFloat(e.target.value)}),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white font-bold text-lg focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all",placeholder:"Enter total amount"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Discount (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:i.discount||0,onChange:e=>o({...i,discount:parseFloat(e.target.value)}),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white font-bold text-lg focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all",placeholder:"0.00"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Paid Amount (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:i.paidAmount||0,onChange:e=>o({...i,paidAmount:parseFloat(e.target.value)}),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white font-bold text-lg focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Balance Due (\xa3)"}),l.jsx("div",{className:"w-full px-4 py-3 bg-gray-800 border border-yellow-500/30 rounded-lg text-yellow-400 font-bold text-lg",children:((i.totalAmount||0)-(i.discount||0)-(i.paidAmount||0)).toFixed(2)})]})]})]})})]})]}),(0,l.jsxs)("div",{className:"sticky bottom-0 p-6 bg-gray-900/90 backdrop-blur-sm border-t border-purple-500/30 flex justify-end gap-3",children:[l.jsx("button",{onClick:r,className:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all font-bold",disabled:c,children:"Cancel"}),(0,l.jsxs)("button",{onClick:p,disabled:c,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-xl transition-all font-bold flex items-center gap-2 disabled:opacity-50",children:[l.jsx(m,{className:"w-4 h-4"}),c?"Saving...":"Save Changes"]})]})]})})}var j=r(63428);function v(e){let t=new Date(e),r=new Date;r.setHours(0,0,0,0),t.setHours(0,0,0,0);let l=Math.ceil((t.getTime()-r.getTime())/864e5);return l<0?{label:"Completed",color:"bg-blue-500",emoji:"✓",class:"completed"}:0===l?{label:"Today",color:"bg-purple-500",emoji:"\uD83D\uDD14",class:"today"}:l<=7?{label:"This Week",color:"bg-orange-500",emoji:"⚡",class:"soon"}:l<=30?{label:"This Month",color:"bg-yellow-500",emoji:"\uD83D\uDCC5",class:"upcoming"}:{label:"Upcoming",color:"bg-green-500",emoji:"\uD83D\uDDD3️",class:"future"}}function N({venueBookings:e,cateringBookings:t,hireBookings:r}){let d=(0,g.useRouter)(),[x,m]=(0,s.useState)("venue"),[b,h]=(0,s.useState)(null),[y,N]=(0,s.useState)(!1),[k,w]=(0,s.useState)(!1),[C,D]=(0,s.useState)(!1),[S,T]=(0,s.useState)("all"),[q,F]=(0,s.useState)(""),[P,E]=(0,s.useState)(!1),[A,B]=(0,s.useState)({clientName:"",clientEmail:"",clientPhone:"",eventType:"",date:"",startTime:"10:00",endTime:"18:00",guestCount:50,totalAmount:0,discount:0,paidAmount:0,status:"tentative",notes:""}),M=e=>{h(e),N(!0)},L=e=>{h(e),w(!0)},H=async(e,t)=>{try{let r=await (0,j.Wp)(e,t);r.success?(d.refresh(),w(!1)):alert(r.error||"Failed to update booking")}catch(e){console.error("Error updating booking:",e),alert("Failed to update booking")}},R=async(e,t)=>{if(window.confirm(`Are you sure you want to delete the booking for ${t}?

This action cannot be undone.`))try{let t=await fetch(`/api/bookings/${e}`,{method:"DELETE"}),r=await t.json();r.success?(alert("✅ Booking deleted successfully!"),d.refresh()):alert(`❌ ${r.error||"Failed to delete booking"}`)}catch(e){console.error("Error deleting booking:",e),alert("❌ Failed to delete booking")}},_=async()=>{if(!A.clientName||!A.clientEmail||!A.date||!A.eventType){alert("❌ Please fill in all required fields (Name, Email, Date, Event Type)");return}E(!0);try{let e=await fetch("/api/bookings/create-direct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...A,bookingType:x})}),t=await e.json();t.success?(alert("✅ Booking created successfully!"),D(!1),B({clientName:"",clientEmail:"",clientPhone:"",eventType:"",date:"",startTime:"10:00",endTime:"18:00",guestCount:50,totalAmount:0,discount:0,paidAmount:0,status:"tentative",notes:""}),d.refresh()):alert(`❌ ${t.error||"Failed to create booking"}`)}catch(e){console.error("Error creating booking:",e),alert("❌ Failed to create booking")}finally{E(!1)}},V=async e=>{try{let t=await fetch(`/api/bookings/${e}/pdf`,{method:"POST"});if(t.ok){let r=await t.blob(),l=window.URL.createObjectURL(r),s=document.createElement("a");s.href=l,s.download=`booking_${e}.pdf`,document.body.appendChild(s),s.click(),window.URL.revokeObjectURL(l),document.body.removeChild(s),alert("✅ PDF downloaded successfully!")}else alert("❌ Failed to generate PDF")}catch(e){console.error("Error downloading PDF:",e),alert("❌ Error downloading PDF")}},$=async(e,t)=>{try{let r=await fetch(`/api/bookings/${e}/email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t})}),l=await r.json();l.success?alert(`✅ ${"confirmation"===t?"Confirmation":"Reminder"} email sent successfully!`):alert(`❌ Failed to send email: ${l.error}`)}catch(e){console.error("Error sending email:",e),alert("❌ Error sending email")}},I=e=>"venue"===e?"\uD83C\uDFAA":"catering"===e?"\uD83C\uDF7D️":"\uD83C\uDFE2",O=e=>"venue"===e?"Venue Bookings":"catering"===e?"Catering Bookings":"Space Hire Bookings",W="venue"===x?e:"catering"===x?t:r,z=(0,s.useMemo)(()=>{let e=W;if(q.trim()){let t=q.toLowerCase();e=e.filter(e=>e.clientName.toLowerCase().includes(t)||e.clientEmail.toLowerCase().includes(t)||e.clientPhone?.toLowerCase().includes(t)||e.eventType.toLowerCase().includes(t)||e.date.includes(t))}return"all"!==S&&(e=e.filter(e=>v(e.date).class===S)),e},[W,q,S]),Z=(0,s.useMemo)(()=>{let e={completed:0,today:0,soon:0,upcoming:0,future:0,total:W.length};return W.forEach(t=>{let r=v(t.date);e[r.class]++}),e},[W]);return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{children:[l.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 bg-clip-text text-transparent",children:"Bookings Management"}),l.jsx("p",{className:"text-gray-400 mt-2",children:"Manage venue, catering, and space hire bookings"})]}),l.jsx("div",{className:"flex gap-4 border-b-2 border-purple-500/30",children:["venue","catering","hire"].map(s=>(0,l.jsxs)("button",{onClick:()=>m(s),className:`px-6 py-4 font-bold text-lg transition-all flex items-center gap-2 ${x===s?"border-b-4 border-purple-500 text-white bg-purple-500/20":"text-gray-400 hover:text-white hover:bg-purple-500/10"}`,children:[l.jsx("span",{className:"text-2xl",children:I(s)}),O(s),l.jsx("span",{className:"ml-2 px-2 py-1 bg-purple-500/30 rounded-full text-xs",children:"venue"===s?e.length:"catering"===s?t.length:r.length})]},s))}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[l.jsx("div",{className:"flex-1 max-w-xl",children:(0,l.jsxs)("div",{className:"relative",children:[l.jsx(a.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{"data-testid":"bookings-search-input",type:"text",placeholder:"Search by name, email, phone, date, event...",value:q,onChange:e=>F(e.target.value),className:"w-full pl-11 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"})]})}),(0,l.jsxs)("button",{"data-testid":"create-booking-btn",onClick:()=>D(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-xl transition-all font-bold flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Booking"]})]}),(0,l.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,l.jsxs)("button",{onClick:()=>T("all"),className:`px-4 py-2 rounded-full font-medium transition-all ${"all"===S?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["All (",Z.total,")"]}),(0,l.jsxs)("button",{onClick:()=>T("today"),className:`px-4 py-2 rounded-full font-medium transition-all ${"today"===S?"bg-purple-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["\uD83D\uDD14 Today (",Z.today,")"]}),(0,l.jsxs)("button",{onClick:()=>T("soon"),className:`px-4 py-2 rounded-full font-medium transition-all ${"soon"===S?"bg-orange-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["⚡ This Week (",Z.soon,")"]}),(0,l.jsxs)("button",{onClick:()=>T("upcoming"),className:`px-4 py-2 rounded-full font-medium transition-all ${"upcoming"===S?"bg-yellow-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["\uD83D\uDCC5 This Month (",Z.upcoming,")"]}),(0,l.jsxs)("button",{onClick:()=>T("future"),className:`px-4 py-2 rounded-full font-medium transition-all ${"future"===S?"bg-green-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["\uD83D\uDDD3️ Future (",Z.future,")"]}),(0,l.jsxs)("button",{onClick:()=>T("completed"),className:`px-4 py-2 rounded-full font-medium transition-all ${"completed"===S?"bg-blue-500 text-white":"bg-gray-800 text-gray-400 hover:bg-gray-700"}`,children:["✓ Completed (",Z.completed,")"]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx("div",{className:"group bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-2xl border border-purple-500/30 shadow-2xl hover:border-purple-400/50 hover:shadow-purple-500/20 transition-all",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Today & This Week"}),l.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:Z.today+Z.soon})]}),l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:l.jsx(i.Z,{className:"w-6 h-6 text-emerald-400"})})]})}),l.jsx("div",{className:"group bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-2xl border border-yellow-500/30 shadow-2xl hover:border-yellow-400/50 hover:shadow-yellow-500/20 transition-all",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Tentative"}),l.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:z.filter(e=>"tentative"===e.status).length})]}),l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500/20 to-orange-500/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:l.jsx(i.Z,{className:"w-6 h-6 text-yellow-400"})})]})}),l.jsx("div",{className:"group bg-gradient-to-br from-gray-900 to-gray-800 p-6 rounded-2xl border border-blue-500/30 shadow-2xl hover:border-blue-400/50 hover:shadow-blue-500/20 transition-all",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 font-medium",children:"Completed"}),l.jsx("p",{className:"text-3xl font-bold text-white mt-2",children:z.filter(e=>"completed"===e.status).length})]}),l.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-full flex items-center justify-center group-hover:scale-110 transition-transform",children:l.jsx(i.Z,{className:"w-6 h-6 text-blue-400"})})]})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4 p-6 bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl border border-purple-500/30 shadow-2xl",children:[l.jsx("span",{className:"font-semibold text-white",children:"Status Filter:"}),(0,l.jsxs)("select",{value:S,onChange:e=>T(e.target.value),className:"px-4 py-2 bg-gray-800 border border-purple-500/30 rounded-lg text-white font-medium focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",children:[l.jsx("option",{value:"all",children:"All Status"}),l.jsx("option",{value:"confirmed",children:"Confirmed"}),l.jsx("option",{value:"tentative",children:"Tentative"}),l.jsx("option",{value:"completed",children:"Completed"}),l.jsx("option",{value:"cancelled",children:"Cancelled"})]}),(0,l.jsxs)("div",{className:"ml-auto text-sm text-purple-400 font-medium",children:["Showing ",z.length," of ",W.length," ",x," bookings"]})]}),l.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl border border-purple-500/30 shadow-2xl overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600",children:(0,l.jsxs)("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Client"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Event"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Date & Time"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Guests"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Amount"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Status"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"divide-y divide-purple-500/20",children:0===z.length?l.jsx("tr",{children:(0,l.jsxs)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-400",children:["No ",x," bookings found"]})}):z.map(e=>(0,l.jsxs)("tr",{className:"hover:bg-purple-500/10 transition-colors",children:[(0,l.jsxs)("td",{className:"px-6 py-4",children:[l.jsx("div",{className:"font-semibold text-white",children:e.clientName}),(0,l.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-1 mt-1",children:[l.jsx(o.Z,{className:"w-3 h-3"}),e.clientEmail]})]}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-white",children:e.eventType})}),(0,l.jsxs)("td",{className:"px-6 py-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-300",children:[l.jsx(i.Z,{className:"w-4 h-4 text-purple-400"}),e.date]}),e.startTime&&(0,l.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.startTime," - ",e.endTime]})]}),l.jsx("td",{className:"px-6 py-4",children:(0,l.jsxs)("div",{className:"flex items-center gap-1 text-gray-300",children:[l.jsx(n.Z,{className:"w-4 h-4 text-purple-400"}),e.guestCount]})}),(0,l.jsxs)("td",{className:"px-6 py-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1 text-gray-300 font-semibold",children:[l.jsx("span",{className:"text-emerald-400 font-bold",children:"\xa3"}),e.totalAmount||0]}),e.paidAmount&&e.paidAmount>0&&(0,l.jsxs)("div",{className:"text-xs text-emerald-400 mt-1",children:["Paid: \xa3",e.paidAmount]})]}),l.jsx("td",{className:"px-6 py-4",children:(()=>{let t=v(e.date);return(0,l.jsxs)("span",{className:`inline-flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-bold text-white ${t.color} shadow-lg`,children:[l.jsx("span",{className:"text-base",children:t.emoji}),t.label]})})()}),l.jsx("td",{className:"px-6 py-4",children:(0,l.jsxs)("div",{className:"flex gap-2",children:[l.jsx("button",{"data-testid":`view-booking-${e._id}`,onClick:()=>M(e),className:"p-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:shadow-xl transition-all",title:"View Details",children:l.jsx(c,{className:"w-4 h-4"})}),l.jsx("button",{"data-testid":`edit-booking-${e._id}`,onClick:()=>L(e),className:"p-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:shadow-xl transition-all",title:"Edit Booking",children:l.jsx(u,{className:"w-4 h-4"})}),l.jsx("button",{"data-testid":`download-pdf-${e._id}`,onClick:()=>V(e._id),className:"p-2 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:shadow-xl transition-all",title:"Download PDF",children:l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),l.jsx("button",{"data-testid":`delete-booking-${e._id}`,onClick:()=>R(e._id,e.clientName),className:"p-2 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-lg hover:shadow-xl transition-all",title:"Delete Booking",children:l.jsx(p,{className:"w-4 h-4"})})]})})]},e._id))})]})})}),C&&l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto",onClick:()=>!P&&D(!1),children:(0,l.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl border-2 border-purple-500/50 shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"sticky top-0 z-10 bg-gradient-to-r from-purple-600 to-pink-600 p-6",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Create New ","venue"===x?"\uD83C\uDFAA Venue":"catering"===x?"\uD83C\uDF7D️ Catering":"\uD83C\uDFE2 Space Hire"," Booking"]}),l.jsx("p",{className:"text-purple-100 mt-1",children:"Direct booking without lead conversion"})]}),(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Client Information"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Client Name *"}),l.jsx("input",{"data-testid":"booking-client-name",type:"text",value:A.clientName,onChange:e=>B({...A,clientName:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"John Smith"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Client Email *"}),l.jsx("input",{"data-testid":"booking-client-email",type:"email",value:A.clientEmail,onChange:e=>B({...A,clientEmail:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"john@example.com"})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Client Phone"}),l.jsx("input",{type:"tel",value:A.clientPhone,onChange:e=>B({...A,clientPhone:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"+44 123 456 7890"})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Event Details"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-5 rounded-xl space-y-4",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Event Type *"}),l.jsx("input",{"data-testid":"booking-event-type",type:"text",value:A.eventType,onChange:e=>B({...A,eventType:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"venue"===x?"Wedding, Corporate Event, Birthday":"catering"===x?"Wedding Catering, Corporate Lunch":"Studio Rental, Theatre Practice"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Date *"}),l.jsx("input",{"data-testid":"booking-date",type:"date",value:A.date,onChange:e=>B({...A,date:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Time (Start)"}),l.jsx("input",{type:"time",value:A.startTime,onChange:e=>B({...A,startTime:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Time (End)"}),l.jsx("input",{type:"time",value:A.endTime,onChange:e=>B({...A,endTime:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Guests"}),l.jsx("input",{type:"number",value:A.guestCount,onChange:e=>B({...A,guestCount:parseInt(e.target.value)}),className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all"})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Notes"}),l.jsx("textarea",{value:A.notes,onChange:e=>B({...A,notes:e.target.value}),rows:3,className:"w-full px-4 py-3 bg-gray-900 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",placeholder:"Any special requirements or notes..."})]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-emerald-400 mb-4",children:"\uD83D\uDCB0 Pricing"}),(0,l.jsxs)("div",{className:"bg-gradient-to-br from-emerald-900/30 to-emerald-800/30 p-6 rounded-xl border border-emerald-500/30",children:[(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Total Amount (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:A.totalAmount,onChange:e=>B({...A,totalAmount:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white font-bold text-lg focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Discount (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:A.discount,onChange:e=>B({...A,discount:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white font-bold text-lg focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Paid Amount (\xa3)"}),l.jsx("input",{type:"number",step:"0.01",value:A.paidAmount,onChange:e=>B({...A,paidAmount:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white font-bold text-lg focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all"})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Balance Due (\xa3)"}),l.jsx("div",{className:"w-full px-4 py-3 bg-gray-800 border border-yellow-500/30 rounded-lg text-yellow-400 font-bold text-lg",children:(A.totalAmount-A.discount-A.paidAmount).toFixed(2)})]})]}),(0,l.jsxs)("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-300 mb-2",children:"Booking Status"}),(0,l.jsxs)("select",{value:A.status,onChange:e=>B({...A,status:e.target.value}),className:"w-full px-4 py-3 bg-gray-900 border border-emerald-500/30 rounded-lg text-white font-medium focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50 transition-all",children:[l.jsx("option",{value:"tentative",children:"Tentative"}),l.jsx("option",{value:"confirmed",children:"Confirmed"})]})]})]})]})]}),(0,l.jsxs)("div",{className:"sticky bottom-0 p-6 bg-gray-900/90 backdrop-blur-sm border-t border-purple-500/30 flex justify-end gap-3",children:[l.jsx("button",{onClick:()=>!P&&D(!1),disabled:P,className:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all font-bold disabled:opacity-50",children:"Cancel"}),l.jsx("button",{"data-testid":"submit-create-booking",onClick:_,disabled:P||!A.clientName||!A.clientEmail||!A.date||!A.eventType,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg hover:shadow-xl transition-all font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:P?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Create Booking"]})})]})]})}),k&&b&&l.jsx(f,{booking:b,isOpen:k,onClose:()=>w(!1),onSave:H}),y&&b&&l.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>N(!1),children:(0,l.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl border-2 border-purple-500/50 shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,l.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6",children:[l.jsx("h3",{className:"text-2xl font-bold text-white",children:"Booking Details"}),(0,l.jsxs)("p",{className:"text-purple-100 mt-1",children:[b.clientName," - ",b.bookingType.toUpperCase()]})]}),(0,l.jsxs)("div",{className:"p-6 space-y-6",children:[(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-3",children:"Client Information"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-xl space-y-2",children:[(0,l.jsxs)("p",{className:"text-white",children:[l.jsx("strong",{children:"Name:"})," ",b.clientName]}),(0,l.jsxs)("p",{className:"text-gray-300",children:[l.jsx("strong",{children:"Email:"})," ",b.clientEmail]}),(0,l.jsxs)("p",{className:"text-gray-300",children:[l.jsx("strong",{children:"Phone:"})," ",b.clientPhone]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-3",children:"Event Details"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-xl space-y-2 text-gray-300",children:[(0,l.jsxs)("p",{children:[l.jsx("strong",{className:"text-white",children:"Type:"})," ",b.eventType]}),(0,l.jsxs)("p",{children:[l.jsx("strong",{className:"text-white",children:"Date:"})," ",b.date]}),(0,l.jsxs)("p",{children:[l.jsx("strong",{className:"text-white",children:"Time:"})," ",b.startTime," - ",b.endTime]}),(0,l.jsxs)("p",{children:[l.jsx("strong",{className:"text-white",children:"Guests:"})," ",b.guestCount]})]})]}),(0,l.jsxs)("div",{children:[l.jsx("label",{className:"block text-sm font-bold text-emerald-400 mb-3",children:"Financial Summary"}),(0,l.jsxs)("div",{className:"bg-gray-800/50 backdrop-blur-sm p-4 rounded-xl space-y-2 text-gray-300",children:[(0,l.jsxs)("p",{children:[l.jsx("strong",{className:"text-white",children:"Total:"})," \xa3",b.totalAmount||0]}),(0,l.jsxs)("p",{children:[l.jsx("strong",{className:"text-white",children:"Discount:"})," \xa3",b.discount||0]}),(0,l.jsxs)("p",{children:[l.jsx("strong",{className:"text-white",children:"Paid:"})," \xa3",b.paidAmount||0]}),(0,l.jsxs)("p",{className:"text-yellow-400 text-lg",children:[l.jsx("strong",{children:"Balance:"})," \xa3",((b.totalAmount||0)-(b.discount||0)-(b.paidAmount||0)).toFixed(2)]})]})]})]}),(0,l.jsxs)("div",{className:"p-6 bg-gray-900/50 flex justify-between items-center gap-3",children:[l.jsx("button",{onClick:()=>N(!1),className:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all font-bold",children:"Close"}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("button",{onClick:()=>{window.print()},className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:shadow-xl transition-all font-bold flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print"]}),(0,l.jsxs)("button",{onClick:()=>V(b._id),className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:shadow-xl transition-all font-bold flex items-center gap-2",children:[l.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"PDF"]}),(0,l.jsxs)("button",{onClick:()=>$(b._id,"confirmation"),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:shadow-xl transition-all font-bold flex items-center gap-2",children:[l.jsx(o.Z,{className:"w-4 h-4"}),"Email"]})]})]})]})})]})}},6552:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,dynamic:()=>u,metadata:()=>c,revalidate:()=>p});var l=r(19510),s=r(83820),a=r(30364),i=r(18208);let o=(0,r(68570).createProxy)(String.raw`/app/frontend/app/crm/bookings/BookingsTabs.tsx#default`);var n=r(91373),d=r(58585);let c={title:"Bookings - LUXE VENUE CRM"},u="force-dynamic",p=0;async function g(){let e=await (0,n.t)();e||(0,d.redirect)("/crm/login"),await (0,s.u)();let t=(await a.$.find().sort({date:-1}).limit(100).lean()).map(e=>({...e,_id:e._id.toString(),bookingType:e.bookingType||"venue",date:"string"==typeof e.date?e.date:e.date?.toISOString?.()?.split("T")[0]||e.date,createdAt:e.createdAt?.toISOString?.()||new Date().toISOString(),updatedAt:e.updatedAt?.toISOString?.(),typeSpecificData:e.typeSpecificData||{}})),r=t.filter(e=>"venue"===e.bookingType),c=t.filter(e=>"catering"===e.bookingType),u=t.filter(e=>"hire"===e.bookingType);return l.jsx(i.Z,{user:e,children:l.jsx(o,{venueBookings:r,cateringBookings:c,hireBookings:u})})}},30364:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var l=r(11185),s=r.n(l);let a=new l.Schema({id:{type:String,required:!0,unique:!0},bookingType:{type:String,enum:["venue","catering","hire"],required:!0},sourceLeadId:{type:String},sourceLeadType:{type:String,enum:["venue","catering","hire"]},clientName:{type:String,required:!0},clientEmail:{type:String,required:!0},clientPhone:{type:String,required:!0},eventType:{type:String,required:!0},date:{type:Date,required:!0},startTime:{type:String,required:!0},endTime:{type:String,required:!0},guestCount:{type:Number,required:!0},notes:{type:String},status:{type:String,enum:["tentative","confirmed","completed","cancelled"],default:"tentative"},totalAmount:{type:Number,default:0},discount:{type:Number,default:0},paidAmount:{type:Number,default:0},balanceDue:{type:Number,default:0},paymentStatus:{type:String,enum:["pending","partial","paid"],default:"pending"},menuDetails:{type:String},specialRequirements:{type:String},typeSpecificData:{type:l.Schema.Types.Mixed,default:{}}},{timestamps:!0,collection:"bookings"});a.index({date:1,status:1}),a.index({clientEmail:1}),a.index({bookingType:1}),a.index({sourceLeadId:1});let i=s().models.Booking||s().model("Booking",a)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),l=t.X(0,[8948,4471,434,623,1814,7771,8853,6960],()=>r(26871));module.exports=l})();