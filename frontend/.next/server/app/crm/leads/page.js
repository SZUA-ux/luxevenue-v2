(()=>{var e={};e.id=2937,e.ids=[2937],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},61282:e=>{"use strict";e.exports=require("child_process")},84770:e=>{"use strict";e.exports=require("crypto")},80665:e=>{"use strict";e.exports=require("dns")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},19801:e=>{"use strict";e.exports=require("os")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},17923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d}),r(42172),r(11506),r(35866);var s=r(23191),a=r(88716),l=r(37922),n=r.n(l),i=r(95231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["crm",{children:["leads",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,42172)),"/app/frontend/app/crm/leads/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"/app/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/frontend/app/crm/leads/page.tsx"],p="/crm/leads/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/crm/leads/page",pathname:"/crm/leads",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},88986:(e,t,r)=>{Promise.resolve().then(r.bind(r,66575)),Promise.resolve().then(r.bind(r,9494))},66575:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var s=r(10326),a=r(17577),l=r(88307),n=r(94019),i=r(62881);let o=(0,i.Z)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var d=r(5932);let c=(0,i.Z)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);var p=r(44856);let u=(0,i.Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var x=r(63428),m=r(35047);function g({leads:e}){let t=(0,m.useRouter)(),[r,i]=(0,a.useState)("all"),[g,h]=(0,a.useState)("all"),[b,y]=(0,a.useState)(""),[f,v]=(0,a.useState)(null),[j,w]=(0,a.useState)(!1),[N,S]=(0,a.useState)({date:"",startTime:"10:00",endTime:"18:00",guestCount:0,totalAmount:0,discount:0,paidAmount:0,eventType:"",menuDetails:"",specialRequirements:"",status:"confirmed"}),[C,A]=(0,a.useState)(!1),q=e.filter(e=>{if("all"!==r&&e.type!==r||"all"!==g&&e.status!==g)return!1;if(b.trim()){let t=b.toLowerCase();return e.clientName.toLowerCase().includes(t)||e.clientEmail.toLowerCase().includes(t)||e.clientPhone?.toLowerCase().includes(t)||e.eventType?.toLowerCase().includes(t)||e.eventDate?.includes(t)||e.preferredDate?.includes(t)}return!0}),k=e=>{v(e),S({date:e.eventDate||e.preferredDate||"",startTime:"10:00",endTime:"18:00",guestCount:e.guestCount||50,totalAmount:0,discount:0,paidAmount:0,eventType:e.eventType||e.spaceType||"",menuDetails:"",specialRequirements:e.notes||"",status:"tentative"}),w(!0)},D=async()=>{if(f&&!C){A(!0);try{let e=await (0,x.n$)(f._id,f.type,N);e.success?(alert("✅ Lead converted to booking successfully!"),w(!1),v(null),t.refresh()):alert("❌ "+(e.error||"Failed to convert lead. Please check all required fields."))}catch(e){alert("❌ An error occurred. Please try again."),console.error("Convert error:",e)}finally{A(!1)}}},T=e=>"venue"===e?"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-400":"catering"===e?"bg-gradient-to-r from-purple-500 to-purple-600 text-white border-purple-400":"bg-gradient-to-r from-orange-500 to-orange-600 text-white border-orange-400",E=e=>"new"===e?"bg-gradient-to-r from-emerald-500 to-emerald-600 text-white":"contacted"===e?"bg-gradient-to-r from-yellow-500 to-yellow-600 text-white":"qualified"===e?"bg-gradient-to-r from-purple-500 to-purple-600 text-white":"converted"===e?"bg-gradient-to-r from-green-500 to-green-600 text-white":"lost"===e?"bg-gradient-to-r from-red-500 to-red-600 text-white":"bg-gradient-to-r from-gray-500 to-gray-600 text-white";return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-400 via-pink-400 to-orange-400 bg-clip-text text-transparent",children:"All Leads"}),s.jsx("p",{className:"text-gray-400 mt-2",children:"Manage all incoming enquiries"})]}),(0,s.jsxs)("div",{className:"relative max-w-2xl",children:[s.jsx(l.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Search by name, email, phone, event type, date...",value:b,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-gray-800/50 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all"}),b&&s.jsx("button",{onClick:()=>y(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:s.jsx(n.Z,{className:"w-5 h-5"})})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 p-6 bg-gradient-to-r from-gray-900 to-gray-800 rounded-2xl border border-purple-500/30 shadow-2xl",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(o,{className:"w-5 h-5 text-purple-400"}),s.jsx("span",{className:"font-semibold text-white",children:"Filters:"})]}),(0,s.jsxs)("select",{value:r,onChange:e=>i(e.target.value),className:"px-4 py-2 bg-gray-800 border border-purple-500/30 rounded-lg text-white font-medium focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",children:[s.jsx("option",{value:"all",children:"All Types"}),s.jsx("option",{value:"venue",children:"Venue Leads"}),s.jsx("option",{value:"catering",children:"Catering Leads"}),s.jsx("option",{value:"hire",children:"Space Hire Leads"})]}),(0,s.jsxs)("select",{value:g,onChange:e=>h(e.target.value),className:"px-4 py-2 bg-gray-800 border border-purple-500/30 rounded-lg text-white font-medium focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50 transition-all",children:[s.jsx("option",{value:"all",children:"All Status"}),s.jsx("option",{value:"new",children:"New"}),s.jsx("option",{value:"contacted",children:"Contacted"}),s.jsx("option",{value:"qualified",children:"Qualified"}),s.jsx("option",{value:"converted",children:"Converted"}),s.jsx("option",{value:"lost",children:"Lost"})]}),(0,s.jsxs)("div",{className:"ml-auto text-sm text-purple-400 font-medium",children:["Showing ",q.length," of ",e.length," leads"]})]}),s.jsx("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl border border-purple-500/30 shadow-2xl overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gradient-to-r from-purple-600 to-pink-600",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Type"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Event/Service"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Date"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-white uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-purple-500/20",children:0===q.length?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"px-6 py-12 text-center text-gray-400",children:"No leads found"})}):q.map(e=>(0,s.jsxs)("tr",{className:"hover:bg-purple-500/10 transition-colors",children:[(0,s.jsxs)("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"font-semibold text-white",children:e.clientName}),(0,s.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-1 mt-1",children:[s.jsx(d.Z,{className:"w-3 h-3"}),e.clientEmail]}),(0,s.jsxs)("div",{className:"text-sm text-gray-400 flex items-center gap-1 mt-1",children:[s.jsx(c,{className:"w-3 h-3"}),e.clientPhone]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-xs font-bold border shadow-lg ${T(e.type)}`,children:"venue"===e.type?"VENUE":"catering"===e.type?"CATERING":"SPACE HIRE"})}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[s.jsx("div",{className:"text-sm font-medium text-white",children:e.eventType||e.spaceType||"-"}),e.guestCount&&(0,s.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[e.guestCount," guests"]})]}),(0,s.jsxs)("td",{className:"px-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-300",children:[s.jsx(p.Z,{className:"w-4 h-4 text-purple-400"}),e.eventDate||e.preferredDate||"-"]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Submitted ",new Date(e.createdAt).toLocaleDateString()]})]}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:`inline-block px-3 py-1.5 rounded-lg text-xs font-bold shadow-lg ${E(e.status)}`,children:(e.status||"new").toUpperCase()})}),s.jsx("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>v(e),className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:shadow-xl transition-all text-sm font-bold",children:"VIEW"}),"converted"!==e.status&&(0,s.jsxs)("button",{onClick:()=>k(e),className:"px-4 py-2 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:shadow-xl transition-all text-sm font-bold flex items-center gap-1",children:[s.jsx(u,{className:"w-4 h-4"}),"CONVERT"]})]})})]},e._id))})]})})}),f&&!j&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>v(null),children:(0,s.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl border-2 border-purple-500/50 shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:f.clientName}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:s.jsx("span",{className:`inline-block px-3 py-1 rounded-lg text-xs font-bold ${T(f.type)}`,children:"venue"===f.type?"VENUE LEAD":"catering"===f.type?"CATERING LEAD":"SPACE HIRE LEAD"})})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4 text-gray-300",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-bold text-purple-400",children:"Contact Information"}),(0,s.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(d.Z,{className:"w-4 h-4 text-purple-400"}),s.jsx("a",{href:`mailto:${f.clientEmail}`,className:"hover:text-purple-400",children:f.clientEmail})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(c,{className:"w-4 h-4 text-purple-400"}),s.jsx("a",{href:`tel:${f.clientPhone}`,className:"hover:text-purple-400",children:f.clientPhone})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-bold text-purple-400",children:"Event Details"}),(0,s.jsxs)("div",{className:"mt-2 space-y-2",children:[(0,s.jsxs)("p",{children:[s.jsx("strong",{className:"text-white",children:"Type:"})," ",f.eventType||f.spaceType||"-"]}),f.cuisineType&&(0,s.jsxs)("p",{children:[s.jsx("strong",{className:"text-white",children:"Cuisine:"})," ",f.cuisineType]}),f.guestCount&&(0,s.jsxs)("p",{children:[s.jsx("strong",{className:"text-white",children:"Guests:"})," ",f.guestCount]}),(f.eventDate||f.preferredDate)&&(0,s.jsxs)("p",{children:[s.jsx("strong",{className:"text-white",children:"Date:"})," ",f.eventDate||f.preferredDate]}),f.location&&(0,s.jsxs)("p",{children:[s.jsx("strong",{className:"text-white",children:"Location:"})," ",f.location]})]})]}),f.notes&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"text-sm font-bold text-purple-400",children:"Notes"}),s.jsx("p",{className:"mt-2 bg-gray-800 p-4 rounded-lg",children:f.notes})]})]}),(0,s.jsxs)("div",{className:"p-6 bg-gray-900/50 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>v(null),className:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all font-bold",children:"Close"}),"converted"!==f.status&&s.jsx("button",{onClick:()=>{w(!0)},className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:shadow-xl transition-all font-bold",children:"Convert to Booking"})]})]})}),j&&f&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>w(!1),children:(0,s.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 rounded-2xl border-2 border-emerald-500/50 shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"bg-gradient-to-r from-emerald-600 to-green-600 p-6",children:[s.jsx("h3",{className:"text-2xl font-bold text-white",children:"Convert Lead to Booking"}),(0,s.jsxs)("p",{className:"text-emerald-100 mt-1",children:[f.clientName," - ",f.clientEmail]})]}),(0,s.jsxs)("div",{className:"p-6 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-2",children:"Event Type *"}),s.jsx("input",{type:"text",value:N.eventType,onChange:e=>S({...N,eventType:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50",placeholder:"Wedding, Corporate Event, etc."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-2",children:"Date *"}),s.jsx("input",{type:"date",value:N.date,onChange:e=>S({...N,date:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-2",children:"Time (Start)"}),s.jsx("input",{type:"time",value:N.startTime,onChange:e=>S({...N,startTime:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-2",children:"Time (End)"}),s.jsx("input",{type:"time",value:N.endTime,onChange:e=>S({...N,endTime:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-2",children:"Guests"}),s.jsx("input",{type:"number",value:N.guestCount,onChange:e=>S({...N,guestCount:parseInt(e.target.value)}),className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-400 mb-2",children:"Total Amount (\xa3)"}),s.jsx("input",{type:"number",step:"0.01",value:N.totalAmount,onChange:e=>S({...N,totalAmount:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 bg-gray-800 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50",placeholder:"0.00"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-400 mb-2",children:"Discount (\xa3)"}),s.jsx("input",{type:"number",step:"0.01",value:N.discount,onChange:e=>S({...N,discount:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 bg-gray-800 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50",placeholder:"0.00"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-emerald-400 mb-2",children:"Paid Amount (\xa3)"}),s.jsx("input",{type:"number",step:"0.01",value:N.paidAmount,onChange:e=>S({...N,paidAmount:parseFloat(e.target.value)||0}),className:"w-full px-4 py-3 bg-gray-800 border border-emerald-500/30 rounded-lg text-white focus:border-emerald-400 focus:ring-2 focus:ring-emerald-400/50",placeholder:"0.00"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-yellow-400 mb-2",children:"Balance Due (\xa3)"}),s.jsx("div",{className:"w-full px-4 py-3 bg-gray-700 border border-yellow-500/30 rounded-lg text-yellow-400 font-bold text-lg",children:(N.totalAmount-N.discount-N.paidAmount).toFixed(2)})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-2",children:"Booking Status"}),(0,s.jsxs)("select",{value:N.status,onChange:e=>S({...N,status:e.target.value}),className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50",children:[s.jsx("option",{value:"tentative",children:"Tentative"}),s.jsx("option",{value:"confirmed",children:"Confirmed"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-2",children:"Menu Details"}),s.jsx("textarea",{value:N.menuDetails,onChange:e=>S({...N,menuDetails:e.target.value}),rows:3,className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50",placeholder:"Menu selections, dietary requirements..."})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-purple-400 mb-2",children:"Special Requirements"}),s.jsx("textarea",{value:N.specialRequirements,onChange:e=>S({...N,specialRequirements:e.target.value}),rows:3,className:"w-full px-4 py-3 bg-gray-800 border border-purple-500/30 rounded-lg text-white focus:border-purple-400 focus:ring-2 focus:ring-purple-400/50",placeholder:"Additional notes..."})]})]}),(0,s.jsxs)("div",{className:"p-6 bg-gray-900/50 flex justify-end gap-3",children:[s.jsx("button",{onClick:()=>{w(!1),v(null)},disabled:C,className:"px-6 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all font-bold disabled:opacity-50",children:"Cancel"}),s.jsx("button",{onClick:D,disabled:C||!N.date||!N.eventType,className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-lg hover:shadow-xl transition-all font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:C?"Converting...":"Create Booking"})]})]})})]})}},42172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,dynamic:()=>x,metadata:()=>u,revalidate:()=>m});var s=r(19510),a=r(83820),l=r(23621),n=r(16906),i=r(34287),o=r(18208);let d=(0,r(68570).createProxy)(String.raw`/app/frontend/app/crm/leads/LeadsClient.tsx#default`);var c=r(91373),p=r(58585);let u={title:"Leads - LUXE VENUE CRM"},x="force-dynamic",m=0;async function g(){let e=await (0,c.t)();e||(0,p.redirect)("/crm/login"),await (0,a.u)();let t=await l.X.find().sort({createdAt:-1}).limit(100).lean(),r=await n.u.find().sort({createdAt:-1}).limit(100).lean(),u=await i.f.find().sort({createdAt:-1}).limit(100).lean(),x=[...t.map(e=>({...e,_id:e._id.toString(),type:"venue",createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt?.toISOString()})),...r.map(e=>({...e,_id:e._id.toString(),type:"catering",createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt?.toISOString()})),...u.map(e=>({...e,_id:e._id.toString(),type:"hire",createdAt:e.createdAt.toISOString(),updatedAt:e.updatedAt?.toISOString()}))].sort((e,t)=>new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());return s.jsx(o.Z,{user:e,children:s.jsx(d,{leads:x})})}},16906:(e,t,r)=>{"use strict";r.d(t,{u:()=>n});var s=r(11185),a=r.n(s);let l=new s.Schema({id:{type:String,required:!0,unique:!0},name:{type:String,required:!0},email:{type:String},phone:{type:String},source:{type:String,required:!0},status:{type:String,enum:["New","Contacted","Qualified","Converted","Lost"],default:"New"},interestedIn:{type:String},nextFollowUpDate:{type:Date},lastContactedAt:{type:Date},convertedToEnquiryId:{type:String},notes:[{text:{type:String},addedAt:{type:Date,default:Date.now},addedBy:{type:String}}]},{timestamps:!0,collection:"leads"});l.index({createdAt:-1,status:1});let n=a().models.CateringLead||a().model("CateringLead",l)},34287:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var s=r(11185),a=r.n(s);let l=new s.Schema({id:{type:String,required:!0,unique:!0},name:{type:String,required:!0},email:{type:String,required:!0},phone:{type:String,required:!0},eventType:{type:String,required:!0},date:{type:Date},startTime:{type:String},endTime:{type:String},guestCount:{type:Number},message:{type:String},status:{type:String,enum:["New","Contacted","Converted","Lost"],default:"New"},source:{type:String,required:!0},sourceUrl:{type:String},contactedAt:{type:Date},convertedToBookingId:{type:String},lostReason:{type:String},receivedAt:{type:Date,default:Date.now},notes:[{text:{type:String},addedAt:{type:Date,default:Date.now},addedBy:{type:String}}]},{timestamps:!0,collection:"hire_leads"});l.index({receivedAt:-1,status:1}),l.index({email:1}),l.index({date:1});let n=a().models.HireLead||a().model("HireLead",l)},23621:(e,t,r)=>{"use strict";r.d(t,{X:()=>n});var s=r(11185),a=r.n(s);let l=new s.Schema({id:{type:String,required:!0,unique:!0},name:{type:String,required:!0},email:{type:String,required:!0},phone:{type:String,required:!0},eventType:{type:String,required:!0},eventDate:{type:Date},numberOfGuests:{type:Number},message:{type:String},status:{type:String,enum:["New","Contacted","Converted","Lost"],default:"New"},source:{type:String,required:!0},sourceUrl:{type:String},contactedAt:{type:Date},convertedToBookingId:{type:String},lostReason:{type:String},receivedAt:{type:Date,default:Date.now},notes:[{text:{type:String},addedAt:{type:Date,default:Date.now},addedBy:{type:String}}]},{timestamps:!0,collection:"enquiries"});l.index({receivedAt:-1,status:1}),l.index({email:1});let n=a().models.VenueLead||a().model("VenueLead",l)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,4471,434,623,1814,7771,8853,6960],()=>r(17923));module.exports=s})();